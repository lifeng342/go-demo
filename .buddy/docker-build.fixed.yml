- pipeline: docker build
  events:
    - type: PUSH
      refs:
        - refs/heads/main
  fail_on_prepare_env_warning: true
  actions:
    - action: Build Docker image
      type: DOCKERFILE
      integration: Docker_Hub
      docker_image_tag: $BUDDY_RUN_COMMIT_SHORT
      dockerfile_path: dockerfile
      docker_registry: DOCKER_HUB
      repository: $BUDDY_PROJECT_NAME_ID
      do_not_prune_images: true
      build_args:
        - GIT_USER=lifeng342
        - GIT_ACCESS_TOKEN=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
      pull: false
